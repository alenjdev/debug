import{r as a,j as l,a as R,A,b as _,F as E,R as N,c as k,d as L}from"./vendor.dc0dda93.js";const H=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))h(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const g of o.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&h(g)}).observe(document,{childList:!0,subtree:!0});function u(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerpolicy&&(o.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?o.credentials="include":r.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function h(r){if(r.ep)return;r.ep=!0;const o=u(r);fetch(r.href,o)}};H();const T={debugItems:[{stream:"deadman.handle.status",type:"bool",name:"Deadman Handle status",state:"Enable"},{stream:"autonomy",type:"bool",name:"Autonomy",state:"Enable"},{stream:"blade.status",type:"bool",name:"Blade",state:"Engaged"},{stream:"left.rpm",type:"numeric",name:"Left RPM",state:0},{stream:"right.rpm",type:"numeric",name:"Right RPM",state:0},{stream:"voltage",type:"numeric",name:"Voltage",state:0}]},$="_table_176v2_1";var P={table:$};class B extends a.exports.Component{render(){return l("table",{style:{gridTemplateColumns:`repeat(${this.props.columns}, 1fr)`},className:P.table,children:this.props.children})}}const O="_header_1rzw6_1";var j={header:O};class I extends a.exports.Component{render(){return l("thead",{children:l("tr",{children:this.props.headers.map((e,u)=>l("th",{className:j.header,children:e},u))})})}}class F extends a.exports.Component{render(){return l("tbody",{children:this.props.children})}}const q="_row_d10ys_1";var z={row:q};class K extends a.exports.Component{render(){return l("tr",{className:z.row,children:this.props.children})}}var x={"data-cell":"_data-cell_2wvbm_1","data-cell-name":"_data-cell-name_2wvbm_8","data-cell-unknown":"_data-cell-unknown_2wvbm_11","data-cell-critical":"_data-cell-critical_2wvbm_25","data-cell-good":"_data-cell-good_2wvbm_39","data-cell-bad":"_data-cell-bad_2wvbm_53"};class w extends a.exports.Component{render(){return l("td",{className:`${x["data-cell"]} ${x[`data-cell-${this.props.type}`]}`,children:this.props.content})}}const G=(n,e)=>n==="Deadman Handle status"&&(e==null?void 0:e.deadmanHandleStatus)===void 0?["-","unknown"]:n==="Deadman Handle status"&&(e==null?void 0:e.deadmanHandleStatus)===!0?["Engaged","critical"]:n==="Deadman Handle status"&&(e==null?void 0:e.deadmanHandleStatus)===!1?["Disengaged","good"]:n==="Autonomy"&&(e==null?void 0:e.autonomy)===void 0?["-","unknown"]:n==="Autonomy"&&(e==null?void 0:e.autonomy)===!0?["Enable","good"]:n==="Autonomy"&&(e==null?void 0:e.autonomy)===!1?["Disable","bad"]:n==="Blade"&&(e==null?void 0:e.bladeStatus)===void 0?["-","unknown"]:n==="Blade"&&(e==null?void 0:e.bladeStatus)===!0?["Engaged","good"]:n==="Blade"&&(e==null?void 0:e.bladeStatus)===!1?["Disengaged","critical"]:n==="Left RPM"&&(e==null?void 0:e.leftRpm)===void 0?["-","unknown"]:n==="Left RPM"&&(e==null?void 0:e.leftRpm)!==void 0?(e==null?void 0:e.leftRpm)===0?[e==null?void 0:e.leftRpm,"bad"]:[Math.round(e==null?void 0:e.leftRpm),"good"]:n==="Right RPM"&&(e==null?void 0:e.rightRpm)===void 0?["-","unknown"]:n==="Right RPM"&&(e==null?void 0:e.rightRpm)!==void 0?(e==null?void 0:e.rightRpm)===0?[e==null?void 0:e.rightRpm,"bad"]:[Math.round(e==null?void 0:e.rightRpm),"good"]:n==="Voltage"&&(e==null?void 0:e.voltage)===void 0?["-","unknown"]:n==="Voltage"&&(e==null?void 0:e.voltage)!==void 0?(e==null?void 0:e.voltage)===0?[e==null?void 0:e.voltage,"bad"]:[Math.round(e==null?void 0:e.voltage),"good"]:["-","unknown"],J=({tableHeaders:n,topicStats:e})=>R(B,{columns:n.length,children:[l(I,{headers:n}),l(F,{children:T.debugItems.map((u,h)=>{const r=G(u.name,e);return R(K,{children:[l(w,{content:u.name}),l(w,{content:r[0].toString(),type:r[1]})]},h)})})]}),Q=({device:n})=>{const[e,u]=a.exports.useState(),[h,r]=a.exports.useState(),[o,g]=a.exports.useState(),[c,t]=a.exports.useState(),[D,b]=a.exports.useState(),[M,y]=a.exports.useState(),[i]=a.exports.useState(10);a.exports.useEffect(()=>{A.addModuleDataListener(C)},[n]);const v=(s,m,f)=>s+f*1e3<m,C=async s=>{const m=s.streams;if(Object.keys(m).length===0)throw new Error("No streams.");Object.keys(m).forEach(f=>{const d=U(m,f);if(typeof d[1]!="string"&&d[1]!==void 0){if(m[f].data[0].name==="autonomy"&&d[1].values[0]!==void 0){if(v(d[0],s.time,i)){u(void 0);return}u(d[1].values[0])}if(m[f].data[0].name==="left.rpm"){if(v(d[0],s.time,i)){t(void 0);return}t(d[1])}if(m[f].data[0].name==="right.rpm"){if(v(d[0],s.time,i)){b(void 0);return}b(d[1])}if(m[f].data[0].name==="blade.status"&&d[1].values[0]!==void 0){if(v(d[0],s.time,i)){r(void 0);return}r(d[1].values[0])}if(m[f].data[0].name==="deadman.handle.status"&&d[1].values[0]!==void 0){if(v(d[0],s.time,i)){g(void 0);return}g(d[1].values[0])}if(m[f].data[0].name==="voltage"){if(v(d[0],s.time,i)){y(void 0);return}y(d[1])}}})};return l(J,{tableHeaders:["Item","Status"],topicStats:{autonomy:e,bladeStatus:h,deadmanHandleStatus:o,leftRpm:c,rightRpm:D,voltage:M}})},U=(n,e)=>{if(n[e]===void 0)return"No stream.";if(n[e].loading)return;if(n[e].tooMuchData)return"Too much data.";if(n[e].data.length===0)return"No data.";const u=n[e].data[0].points.at(-1);return u||"No datapoints."};function W(){const[n,e]=a.exports.useState();a.exports.useEffect(()=>{u()},[]);const u=async()=>{if(await _.waitTilAuthenticated()){const h=await E.getCurrentDevice();e(h)}};return l("div",{className:"App",children:l(Q,{device:n})})}N.render(l(k,{type:"module",children:l(L.StrictMode,{children:l(W,{})})}),document.getElementById("root"));
