import{j as y,r as l,A,a as C,F as _,R as E,b as N}from"./vendor.403a6c47.js";const k=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))m(r);new MutationObserver(r=>{for(const u of r)if(u.type==="childList")for(const g of u.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&m(g)}).observe(document,{childList:!0,subtree:!0});function a(r){const u={};return r.integrity&&(u.integrity=r.integrity),r.referrerpolicy&&(u.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?u.credentials="include":r.crossorigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function m(r){if(r.ep)return;r.ep=!0;const u=a(r);fetch(r.href,u)}};k();const L={debugItems:[{stream:"deadman.handle.status",type:"bool",name:"Deadman Handle status",state:"Enable"},{stream:"autonomy",type:"bool",name:"Autonomy",state:"Enable"},{stream:"blade.status",type:"bool",name:"Blade",state:"Engaged"},{stream:"left.rpm",type:"numeric",name:"Left RPM",state:0},{stream:"right.rpm",type:"numeric",name:"Right RPM",state:0},{stream:"voltage",type:"numeric",name:"Voltage",state:0}]},H="_table_176v2_1";var T={table:H};const d=y.exports.jsx,h=y.exports.jsxs;class $ extends l.exports.Component{render(){return d("table",{style:{gridTemplateColumns:`repeat(${this.props.columns}, 1fr)`},className:T.table,children:this.props.children})}}const P="_header_1rzw6_1";var j={header:P};class B extends l.exports.Component{render(){return d("thead",{children:this.props.headers.map((e,a)=>d("th",{className:j.header,children:e},a))})}}class O extends l.exports.Component{render(){return d("tbody",{children:this.props.children})}}const I="_row_d10ys_1";var V={row:I};class F extends l.exports.Component{render(){return d("tr",{className:V.row,children:this.props.children})}}var v={"data-cell":"_data-cell_2wvbm_1","data-cell-name":"_data-cell-name_2wvbm_8","data-cell-unknown":"_data-cell-unknown_2wvbm_11","data-cell-critical":"_data-cell-critical_2wvbm_25","data-cell-good":"_data-cell-good_2wvbm_39","data-cell-bad":"_data-cell-bad_2wvbm_53"};class b extends l.exports.Component{render(){return d("td",{className:`${v["data-cell"]} ${v[`data-cell-${this.props.type}`]}`,children:this.props.content})}}const q=(n,e)=>n==="Deadman Handle status"&&(e==null?void 0:e.deadmanHandleStatus)===void 0?["-","unknown"]:n==="Deadman Handle status"&&(e==null?void 0:e.deadmanHandleStatus)===!0?["Engaged","critical"]:n==="Deadman Handle status"&&(e==null?void 0:e.deadmanHandleStatus)===!1?["Disengaged","good"]:n==="Autonomy"&&(e==null?void 0:e.autonomy)===void 0?["-","unknown"]:n==="Autonomy"&&(e==null?void 0:e.autonomy)===!0?["Enable","good"]:n==="Autonomy"&&(e==null?void 0:e.autonomy)===!1?["Disable","bad"]:n==="Blade"&&(e==null?void 0:e.bladeStatus)===void 0?["-","unknown"]:n==="Blade"&&(e==null?void 0:e.bladeStatus)===!0?["Engaged","good"]:n==="Blade"&&(e==null?void 0:e.bladeStatus)===!1?["Disengaged","critical"]:n==="Left RPM"&&(e==null?void 0:e.leftRpm)===void 0?["-","unknown"]:n==="Left RPM"&&(e==null?void 0:e.leftRpm)!==void 0?(e==null?void 0:e.leftRpm)===0?[e==null?void 0:e.leftRpm,"bad"]:[Math.round(e==null?void 0:e.leftRpm),"good"]:n==="Right RPM"&&(e==null?void 0:e.rightRpm)===void 0?["-","unknown"]:n==="Right RPM"&&(e==null?void 0:e.rightRpm)!==void 0?(e==null?void 0:e.rightRpm)===0?[e==null?void 0:e.rightRpm,"bad"]:[Math.round(e==null?void 0:e.rightRpm),"good"]:n==="Voltage"&&(e==null?void 0:e.voltage)===void 0?["-","unknown"]:n==="Voltage"&&(e==null?void 0:e.voltage)!==void 0?(e==null?void 0:e.voltage)===0?[e==null?void 0:e.voltage,"bad"]:[Math.round(e==null?void 0:e.voltage),"good"]:["-","unknown"],z=({tableHeaders:n,topicStats:e})=>h($,{columns:n.length,children:[d(B,{headers:n}),d(O,{children:L.debugItems.map((a,m)=>{const r=q(a.name,e);return h(F,{children:[d(b,{content:a.name}),d(b,{content:r[0].toString(),type:r[1]})]},m)})})]}),K=({device:n})=>{l.exports.useState("Waiting for data...");const[e,a]=l.exports.useState(),[m,r]=l.exports.useState(),[u,g]=l.exports.useState(),[i,t]=l.exports.useState(),[x,R]=l.exports.useState(),[w,M]=l.exports.useState();l.exports.useEffect(()=>{A.addModuleDataListener(D)},[n]);const D=async c=>{const s=c.streams;if(Object.keys(s).length===0)throw new Error("No streams.");Object.keys(s).forEach((f,J)=>{const o=W(s,f);typeof o!="string"&&o!==void 0&&(s[f].data[0].name==="autonomy"&&o.values[0]!==void 0&&a(o.values[0]),s[f].data[0].name==="left.rpm"&&t(o),s[f].data[0].name==="right.rpm"&&R(o),s[f].data[0].name==="blade.status"&&o.values[0]!==void 0&&r(o.values[0]),s[f].data[0].name==="deadman.handle.status"&&o.values[0]!==void 0&&g(o.values[0]),s[f].data[0].name==="voltage"&&M(o))})};return d(z,{topicStats:{autonomy:e,bladeStatus:m,deadmanHandleStatus:u,leftRpm:i,rightRpm:x,voltage:w},tableHeaders:["Item","Status"]})},W=(n,e)=>{if(n[e]===void 0)return"No stream.";if(n[e].loading)return;if(n[e].tooMuchData)return"Too much data.";if(n[e].data.length===0)return"No data.";const a=n[e].data[0].points.at(-1);return a?a[1]:"No datapoints."};function G(){const[n,e]=l.exports.useState();l.exports.useEffect(()=>{a()},[]);const a=async()=>{if(await C.waitTilAuthenticated()){const m=await _.getCurrentDevice();e(m)}};return d("div",{className:"App",children:d(K,{device:n})})}E.render(d(N.StrictMode,{children:d(G,{})}),document.getElementById("root"));
