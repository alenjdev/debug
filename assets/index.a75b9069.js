import{j as i,r as m,A as b,a as y,F as R,R as w,b as t}from"./vendor.403a6c47.js";const x=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))s(d);new MutationObserver(d=>{for(const r of d)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&s(u)}).observe(document,{childList:!0,subtree:!0});function a(d){const r={};return d.integrity&&(r.integrity=d.integrity),d.referrerpolicy&&(r.referrerPolicy=d.referrerpolicy),d.crossorigin==="use-credentials"?r.credentials="include":d.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(d){if(d.ep)return;d.ep=!0;const r=a(d);fetch(d.href,r)}};x();const M={debugItems:[{stream:"deadman.handle.status",type:"bool",name:"Deadman Handle status",state:"Enable"},{stream:"autonomy",type:"bool",name:"Autonomy",state:"Enable"},{stream:"blade.status",type:"bool",name:"Blade",state:"Engaged"},{stream:"left.rpm",type:"numeric",name:"Left RPM",state:0},{stream:"right.rpm",type:"numeric",name:"Right RPM",state:0},{stream:"voltage",type:"numeric",name:"Voltage",state:0}]},N="_table_176v2_1";var C={table:N};const l=i.exports.jsx,g=i.exports.jsxs;class D extends m.exports.Component{render(){return l("table",{style:{gridTemplateColumns:`repeat(${this.props.columns}, 1fr)`},className:C.table,children:this.props.children})}}const _="_header_1rzw6_1";var A={header:_};class E extends m.exports.Component{render(){return l("thead",{children:this.props.headers.map((e,a)=>l("th",{className:A.header,children:e},a))})}}class k extends m.exports.Component{render(){return l("tbody",{children:this.props.children})}}const H="_row_d10ys_1";var L={row:H};class T extends m.exports.Component{render(){return l("tr",{className:L.row,children:this.props.children})}}var h={"data-cell":"_data-cell_2wvbm_1","data-cell-name":"_data-cell-name_2wvbm_8","data-cell-unknown":"_data-cell-unknown_2wvbm_11","data-cell-critical":"_data-cell-critical_2wvbm_25","data-cell-good":"_data-cell-good_2wvbm_39","data-cell-bad":"_data-cell-bad_2wvbm_53"};class v extends m.exports.Component{render(){return l("td",{className:`${h["data-cell"]} ${h[`data-cell-${this.props.type}`]}`,children:this.props.content})}}const $=(n,e)=>n==="Deadman Handle status"&&(e==null?void 0:e.deadmanHandleStatus)===void 0?["-","unknown"]:n==="Deadman Handle status"&&(e==null?void 0:e.deadmanHandleStatus)===!0?["Engaged","critical"]:n==="Deadman Handle status"&&(e==null?void 0:e.deadmanHandleStatus)===!1?["Disengaged","good"]:n==="Autonomy"&&(e==null?void 0:e.autonomy)===void 0?["-","unknown"]:n==="Autonomy"&&(e==null?void 0:e.autonomy)===!0?["Enable","good"]:n==="Autonomy"&&(e==null?void 0:e.autonomy)===!1?["Disable","bad"]:n==="Blade"&&(e==null?void 0:e.bladeStatus)===void 0?["-","unknown"]:n==="Blade"&&(e==null?void 0:e.bladeStatus)===!0?["Engaged","good"]:n==="Blade"&&(e==null?void 0:e.bladeStatus)===!1?["Disengaged","critical"]:n==="Left RPM"&&(e==null?void 0:e.leftRpm)===void 0?["-","unknown"]:n==="Left RPM"&&(e==null?void 0:e.leftRpm)!==void 0?(e==null?void 0:e.leftRpm)===0?[e==null?void 0:e.leftRpm,"bad"]:[Math.round(e==null?void 0:e.leftRpm),"good"]:n==="Right RPM"&&(e==null?void 0:e.rightRpm)===void 0?["-","unknown"]:n==="Right RPM"&&(e==null?void 0:e.rightRpm)!==void 0?(e==null?void 0:e.rightRpm)===0?[e==null?void 0:e.rightRpm,"bad"]:[Math.round(e==null?void 0:e.rightRpm),"good"]:n==="Voltage"&&(e==null?void 0:e.voltage)===void 0?["-","unknown"]:n==="Voltage"&&(e==null?void 0:e.voltage)!==void 0?(e==null?void 0:e.voltage)===0?[e==null?void 0:e.voltage,"bad"]:[Math.round(e==null?void 0:e.voltage),"good"]:["-","unknown"],c=({tableHeaders:n,topicStats:e})=>g(D,{columns:n.length,children:[l(E,{headers:n}),l(k,{children:M.debugItems.map((a,s)=>{const d=$(a.name,e);return g(T,{children:[l(v,{content:a.name}),l(v,{content:d[0].toString(),type:d[1]})]},s)})})]}),O=({device:n})=>{m.exports.useState("Waiting for data...");const[e,a]=m.exports.useState({autonomy:void 0,bladeStatus:void 0,deadmanHandleStatus:void 0,leftRpm:void 0,rightRpm:void 0,voltage:void 0});m.exports.useEffect(()=>{b.addModuleDataListener(s)},[n]);const s=async d=>{const r=d.streams;if(Object.keys(r).length===0)throw new Error("No streams.");let u=e;Object.keys(r).forEach((f,B)=>{const o=P(r,f);typeof o!="string"&&o!==void 0&&(r[f].data[0].name==="autonomy"&&o.values[0]!==void 0&&(u.autonomy=o.values[0]),r[f].data[0].name==="left.rpm"&&(u.leftRpm=o),r[f].data[0].name==="right.rpm"&&(u.rightRpm=o),r[f].data[0].name==="blade.status"&&o.values[0]!==void 0&&(u.bladeStatus=o.values[0]),r[f].data[0].name==="deadman.handle.status"&&o.values[0]!==void 0&&(u.deadmanHandleStatus=o.values[0]),r[f].data[0].name==="voltage"&&(u.voltage=o)),JSON.stringify(u)!==JSON.stringify(e)&&a(u)})};return l(c,{topicStats:e,tableHeaders:["Item","Status"]})},P=(n,e)=>{if(n[e]===void 0)return"No stream.";if(n[e].loading)return;if(n[e].tooMuchData)return"Too much data.";if(n[e].data.length===0)return"No data.";const a=n[e].data[0].points.at(-1);return a?a[1]:"No datapoints."};function j(){const[n,e]=m.exports.useState();m.exports.useEffect(()=>{a()},[]);const a=async()=>{if(await y.waitTilAuthenticated()){const s=await R.getCurrentDevice();e(s)}};return l("div",{className:"App",children:l(O,{device:n})})}w.render(l(t.StrictMode,{children:l(j,{})}),document.getElementById("root"));
