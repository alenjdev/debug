import{r as d,j as l,a as h,A as c,b as A,F as C,R as _,c as E,d as N}from"./vendor.dc0dda93.js";const k=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const u of r)if(u.type==="childList")for(const g of u.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&s(g)}).observe(document,{childList:!0,subtree:!0});function a(r){const u={};return r.integrity&&(u.integrity=r.integrity),r.referrerpolicy&&(u.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?u.credentials="include":r.crossorigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function s(r){if(r.ep)return;r.ep=!0;const u=a(r);fetch(r.href,u)}};k();const L={debugItems:[{stream:"deadman.handle.status",type:"bool",name:"Deadman Handle status",state:"Enable"},{stream:"autonomy",type:"bool",name:"Autonomy",state:"Enable"},{stream:"blade.status",type:"bool",name:"Blade",state:"Engaged"},{stream:"left.rpm",type:"numeric",name:"Left RPM",state:0},{stream:"right.rpm",type:"numeric",name:"Right RPM",state:0},{stream:"voltage",type:"numeric",name:"Voltage",state:0}]},H="_table_176v2_1";var T={table:H};class $ extends d.exports.Component{render(){return l("table",{style:{gridTemplateColumns:`repeat(${this.props.columns}, 1fr)`},className:T.table,children:this.props.children})}}const P="_header_1rzw6_1";var B={header:P};class O extends d.exports.Component{render(){return l("thead",{children:this.props.headers.map((e,a)=>l("th",{className:B.header,children:e},a))})}}class j extends d.exports.Component{render(){return l("tbody",{children:this.props.children})}}const F="_row_d10ys_1";var I={row:F};class V extends d.exports.Component{render(){return l("tr",{className:I.row,children:this.props.children})}}var v={"data-cell":"_data-cell_2wvbm_1","data-cell-name":"_data-cell-name_2wvbm_8","data-cell-unknown":"_data-cell-unknown_2wvbm_11","data-cell-critical":"_data-cell-critical_2wvbm_25","data-cell-good":"_data-cell-good_2wvbm_39","data-cell-bad":"_data-cell-bad_2wvbm_53"};class b extends d.exports.Component{render(){return l("td",{className:`${v["data-cell"]} ${v[`data-cell-${this.props.type}`]}`,children:this.props.content})}}const q=(n,e)=>n==="Deadman Handle status"&&(e==null?void 0:e.deadmanHandleStatus)===void 0?["-","unknown"]:n==="Deadman Handle status"&&(e==null?void 0:e.deadmanHandleStatus)===!0?["Engaged","critical"]:n==="Deadman Handle status"&&(e==null?void 0:e.deadmanHandleStatus)===!1?["Disengaged","good"]:n==="Autonomy"&&(e==null?void 0:e.autonomy)===void 0?["-","unknown"]:n==="Autonomy"&&(e==null?void 0:e.autonomy)===!0?["Enable","good"]:n==="Autonomy"&&(e==null?void 0:e.autonomy)===!1?["Disable","bad"]:n==="Blade"&&(e==null?void 0:e.bladeStatus)===void 0?["-","unknown"]:n==="Blade"&&(e==null?void 0:e.bladeStatus)===!0?["Engaged","good"]:n==="Blade"&&(e==null?void 0:e.bladeStatus)===!1?["Disengaged","critical"]:n==="Left RPM"&&(e==null?void 0:e.leftRpm)===void 0?["-","unknown"]:n==="Left RPM"&&(e==null?void 0:e.leftRpm)!==void 0?(e==null?void 0:e.leftRpm)===0?[e==null?void 0:e.leftRpm,"bad"]:[Math.round(e==null?void 0:e.leftRpm),"good"]:n==="Right RPM"&&(e==null?void 0:e.rightRpm)===void 0?["-","unknown"]:n==="Right RPM"&&(e==null?void 0:e.rightRpm)!==void 0?(e==null?void 0:e.rightRpm)===0?[e==null?void 0:e.rightRpm,"bad"]:[Math.round(e==null?void 0:e.rightRpm),"good"]:n==="Voltage"&&(e==null?void 0:e.voltage)===void 0?["-","unknown"]:n==="Voltage"&&(e==null?void 0:e.voltage)!==void 0?(e==null?void 0:e.voltage)===0?[e==null?void 0:e.voltage,"bad"]:[Math.round(e==null?void 0:e.voltage),"good"]:["-","unknown"],z=({tableHeaders:n,topicStats:e})=>h($,{columns:n.length,children:[l(O,{headers:n}),l(j,{children:L.debugItems.map((a,s)=>{const r=q(a.name,e);return h(V,{children:[l(b,{content:a.name}),l(b,{content:r[0].toString(),type:r[1]})]},s)})})]}),K=({device:n})=>{d.exports.useState("Waiting for data...");const[e,a]=d.exports.useState(),[s,r]=d.exports.useState(),[u,g]=d.exports.useState(),[y,i]=d.exports.useState(),[t,R]=d.exports.useState(),[w,x]=d.exports.useState();d.exports.useEffect(()=>{c.addModuleDataListener(M)},[n]);const M=async D=>{const m=D.streams;if(Object.keys(m).length===0)throw new Error("No streams.");Object.keys(m).forEach((f,J)=>{const o=W(m,f);typeof o!="string"&&o!==void 0&&(m[f].data[0].name==="autonomy"&&o.values[0]!==void 0&&a(o.values[0]),m[f].data[0].name==="left.rpm"&&i(o),m[f].data[0].name==="right.rpm"&&R(o),m[f].data[0].name==="blade.status"&&o.values[0]!==void 0&&r(o.values[0]),m[f].data[0].name==="deadman.handle.status"&&o.values[0]!==void 0&&g(o.values[0]),m[f].data[0].name==="voltage"&&x(o))})};return l(z,{topicStats:{autonomy:e,bladeStatus:s,deadmanHandleStatus:u,leftRpm:y,rightRpm:t,voltage:w},tableHeaders:["Item","Status"]})},W=(n,e)=>{if(n[e]===void 0)return"No stream.";if(n[e].loading)return;if(n[e].tooMuchData)return"Too much data.";if(n[e].data.length===0)return"No data.";const a=n[e].data[0].points.at(-1);return a?a[1]:"No datapoints."};function G(){const[n,e]=d.exports.useState();d.exports.useEffect(()=>{a()},[]);const a=async()=>{if(await A.waitTilAuthenticated()){const s=await C.getCurrentDevice();e(s)}};return l("div",{className:"App",children:l(K,{device:n})})}_.render(l(E,{type:"module",children:l(N.StrictMode,{children:l(G,{})})}),document.getElementById("root"));
